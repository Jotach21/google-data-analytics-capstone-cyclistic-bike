---
title: " Cyclistic bike-share analysis Capstone"
author: "Jonathan Cherrez Crespo"
date: "2026-01-06"
output: pdf_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(dplyr)
library(lubridate)
library(ggplot2)

Divvy_trips_all <- readRDS("Divvy_trips_all.rds")
summary_dayly <- readRDS("summary_dayly.rds")
summary_hourly <- readRDS("summary_hourly.rds")
summary_rango <- readRDS("summary_rango.rds")
summary_yearly <- readRDS("summary_yearly.rds")
```

## Bike-Share Usage Analysis: Customer vs Subscriber (2019–2020)

## Conversion Strategies for the Marketing Department

## 1.- Introduction (ASK)

### Business Task

The objective of this analysis is to understand and compare the usage of the bike-share system between casual users (Customers) and subscribed users (Subscribers).

Currently, the company aims to increase the number of subscribers, making it essential to identify differences in usage patterns between these two groups.

### What is the objective of the analysis?

The goal of this analysis is to compare the behavior of casual users and subscribers in terms of number of trips, average trip duration, usage by day of the week, usage by hour of the day, and usage patterns over time.

The findings will allow the Marketing department to design strategies focused on converting casual users into subscribers.

### Stakeholders

The main stakeholders of this analysis are the Marketing department, responsible for designing conversion campaigns, and Cyclistic’s executive team, who make strategic decisions based on user behavior patterns.

## 2.- Data Description (PREPARE)

The data used for this analysis was provided by Motivate International Inc. and is publicly available for analysis purposes. The dataset corresponds to the Cyclistic bike-share system and covers the years 2019 and 2020.

Each record in the dataset represents an individual trip and includes information such as user type, trip duration, and trip start and end date and time. This information allows for the analysis of bike-share usage patterns over time.

It is important to note that the datasets do not include personally identifiable information about users. Additionally, there are differences between datasets across years, as variables such as age and gender are not available for all periods, which limits certain demographic analyses.

## 3.- Data Cleaning and Preparation (PROCESS)

Before conducting the analysis, the structure and content of the datasets for 2019 and 2020 were carefully reviewed to identify differences between them.

Data cleaning and standardization tasks were performed, including normalizing column names, correcting date and time formats, and handling missing values. In addition, trips with abnormal durations were identified and filtered out to ensure data quality.

Derived metrics such as trip duration were calculated, and new variables were created to facilitate analysis, including day of the week, hour of the day, and trip duration categories. Finally, both datasets were merged into a single dataset, ensuring consistency and standardization across all variables used.

## 4.- Analysis and Findings (ANALYZE)

### A. System Usage by User Type

This analysis compares the number of trips taken by casual users (Customers) and subscribed users (Subscribers) during 2019 and 2020. The results clearly show that subscribers take a higher number of trips compared to casual users, suggesting more frequent and recurring use of the system.

Additionally, an increase in the number of trips for both user types is observed in 2020 compared to 2019. This growth indicates increased adoption of the service by both subscribers and casual users, representing an opportunity to further promote conversion strategies toward subscription plans.

```{r, echo=FALSE}
# Graph A: Trips by user type and year

summary_yearly %>%
  ggplot(aes(x = usertype, y = trips, fill = usertype)) +
  geom_col(width = 0.9) +
  geom_text(aes(label = scales::comma(trips)), 
          vjust = -0.5, size = 4) +
  facet_wrap(~year) +
  labs(
    title = "Total trips by user type (Customer vs Subscriber)",
    subtitle = "Comparison 2019 vs 2020",
    x = "User type",
    y = "Number of trips"
  ) +
  theme_minimal()
```

### B. Average Trip Duration

This analysis compares the average duration of bike usage during 2019 and 2020. The results clearly show that casual users tend to use the bikes for longer periods compared to subscribed users.

This behavior suggests that casual users primarily use the service for recreational purposes, while subscribers tend to use it for more routine or work-related transportation. This difference represents an opportunity for the Marketing department to design subscription promotions targeted at casual users who take longer and more frequent trips.

```{r, echo=FALSE}
# Graph B: Average trip duration by user type

summary_yearly %>%
  ggplot(aes(x = usertype, y = mean_time, fill = usertype)) +
  geom_col(width = 0.9) +
  geom_text(aes(label = round(mean_time, 1)),
            vjust = -0.3, size = 3.5) +
  facet_wrap(~year) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.12))) +
  labs(
    title = "Average trip duration by user type (2019–2020)",
    subtitle = "Time in minutes",
    x = "User type",
    y = "Average duration (min)"
  ) +
  theme_minimal()
```

### C. Usage by Day of the Week

This analysis compares the number of trips taken by day of the week during 2019 and 2020. The results show that subscribers concentrate most of their bike usage between Monday and Friday, while their activity decreases significantly on weekends.

In contrast, casual users are more active during weekends. This pattern suggests a more recreational use among casual users, representing an opportunity for the Marketing department to design weekend-focused subscription promotions targeting casual riders.

```{r, echo=FALSE}
# Graph C: Trips by day of the week

summary_dayly %>%
  ggplot(aes(x = weekday, y = trips, fill = usertype)) +
  geom_col(
    position = position_dodge(width = 0.6),
    width = 0.5
  ) +
  geom_text(
    aes(label = scales::comma(trips)),
    position = position_dodge(width = 0.6),
    vjust = -0.25,
    size = 3
  ) +
  facet_wrap(~year) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.12))) +
  labs(
    title = "Trips by day of the week",
    subtitle = "Comparison 2019 vs 2020",
    x = "Day of the week",
    y = "Number of trips"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),
    legend.position = "bottom"
  )
```

### D. Usage by Hour of the Day

This analysis examines bike usage throughout different hours of the day. The results show that casual users present a more uniform usage pattern, without strong concentration during specific hours, indicating more flexible and less routine-based usage.

On the other hand, subscribers show significant increases in bike usage during peak hours, primarily in the morning between 5:00 and 10:00 a.m. and in the afternoon between 3:00 and 8:00 p.m. This pattern suggests that subscribers use the system as a means of commuting, representing an opportunity to design subscription strategies targeting users active during peak hours.

```{r, echo=FALSE}
# Graph D: Trips by hour of the day

summary_hourly %>%
  ggplot(aes(x = hour, y = trips, colour = usertype)) +
  geom_line(linewidth = 1) +
  geom_point()+
  labs(
    title = "Bike usage by hour of the day",
    x = "Hour of the day",
    y = "Number of trips"
  ) +
  theme_minimal()

```

### E. Trip Duration Classification

This analysis compares bike usage based on trip duration categories (Very Short, Short, Medium, Long, and Very Long). The results show that subscribers concentrate most of their trips in shorter duration ranges, while casual users have a higher proportion of medium and long trips.

This behavior suggests that casual users primarily use the system for recreational purposes, in contrast to the more frequent and functional usage of subscribers. This pattern represents an opportunity to offer subscription plans tailored to this type of usage, encouraging casual users to convert into subscribers.

```{r, echo=FALSE}
# Graph E: Trip duration ranges

summary_rango %>%
  ggplot(aes(x = trip_class, y = trips, fill = usertype)) +
  geom_col(
    position = position_dodge(width = 0.6),
    width = 0.5
  ) +
  geom_text(
    aes(label = scales::comma(trips)),
    position = position_dodge(width = 0.6),
    vjust = -0.25,
    size = 3
  ) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(
    title = "Trip duration classification by user type",
    x = "Trip duration range",
    y = "Number of trips"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 30, hjust = 1),
    legend.position = "bottom"
  )
```

### F. Year-over-Year Comparison

This analysis compares the evolution of bike-share usage between 2019 and 2020. The results show an overall increase in the total number of trips taken by both user types. However, when analyzing the percentage composition, an increase in the proportion of casual users and a relative decrease in subscribers is observed.

This shift indicates that although subscribers remain the majority, casual users are growing at a faster rate. This behavior represents an opportunity for the Marketing department to reinforce strategies aimed at converting casual users into subscribers through promotions focused on peak hours, weekdays, and weekends, highlighting the benefits of monthly or annual subscription plans.

```{r, echo=FALSE}
# Graph F: User growth by year

summary_yearly %>%
  ggplot(aes(x = factor(year), y = percent, fill = usertype)) +
  geom_col(position = "fill", width = 0.7) +
  geom_text(
    aes(label = paste0(round(percent, 1), "%")),
    position = position_fill(vjust = 0.5),
    size = 4,
    color = "white"
  ) +
  labs(
    title = "Change in user composition (2019–2020)",
    subtitle = "Relative growth of casual users",
    x = "Year",
    y = "User proportion"
  ) +
  theme_minimal()

```

## 5.- Key Conclusions (SHARE)

Subscribers use the bike-share system more frequently and efficiently, reflecting usage patterns associated with daily routines.

Casual users take longer trips and primarily use the system during weekends.

Subscribers show higher usage during peak hours, particularly in the morning and afternoon, suggesting work-related commuting behavior.

Between 2019 and 2020, overall bike usage increased, with casual users growing at a faster rate than subscribers.

These behavioral patterns represent an opportunity to design subscription strategies aimed at converting casual users into subscribers.

## 6.- Recommendations (ACT)

Since casual users are more active during weekends, it is recommended to implement free trials or subscription discounts valid on Saturdays and Sundays to encourage conversion during high-activity periods.

Given that casual users take longer trips, suggesting recreational use, the Marketing department could design flexible subscription plans or monthly benefits tailored to users who take longer rides.

The intensive usage of the system by subscribers during peak hours represents an opportunity to develop subscription campaigns targeting casual users during those times, using messages focused on savings and convenience, such as “Turn your routine into savings.”

It is recommended to clearly communicate the cost difference between pay-per-ride and subscription plans, highlighting the potential savings casual users would gain by becoming subscribers.